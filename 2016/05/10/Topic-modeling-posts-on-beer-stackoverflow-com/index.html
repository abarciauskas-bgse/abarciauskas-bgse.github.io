<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><script type="text/javascript" src="http://d3js.org/d3.v3.js" charset="utf-8"></script><script type="text/javascript" src="/javascripts/d3.tip.js"></script><script type="text/javascript" src="/javascripts/columnChart.js"></script><script type="text/javascript" src="http://numericjs.com/numeric/lib/numeric-1.2.6.min.js"></script><script type="text/javascript" src="//cdn.jsdelivr.net/jstat/1.5.2/jstat.min.js"></script><script type="text/javascript" src="https://protobi.com/examples/pca/pca.js"></script><title> Topic modeling on beer.stackoverflow.com posts · Aimee Barciauskas</title><meta name="description" content="Topic modeling on beer.stackoverflow.com posts - Aimee Barciauskas"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="stylesheet" href="/css/apollo.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,600"></head><body><header><a href="/" class="logo-link"><img></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/" target="_self" class="nav-list-link">BLOG</a></li><li class="nav-list-item"><a href="/archives/" target="_self" class="nav-list-link">ARCHIVE</a></li><li class="nav-list-item"><a href="https://github.com/abarciauskas-bgse" target="_blank" class="nav-list-link">GITHUB</a></li></ul></header><section class="container"><div class="post"><article class="post-block"><h1 class="post-title">Topic modeling on beer.stackoverflow.com posts</h1><div class="post-time">May 10, 2016</div><div class="post-content"><p>Latent Dirichlet Allocation (LDA) is a popular tool in text mining and language processing to produce topic models of text corpora.</p>
<p>I used text from posts on <a href="https://archive.org/details/stackexchange" target="_blank" rel="external">beer.stackoverflow.com</a> and an uncollapsed Gibbs Sampling algorithm to produce distributions of 10 (latent) topics over 5879 unique terms in 1000 posts.</p>
<p>The code is available <a href="https://github.com/abarciauskas-bgse/text_mining/tree/master/lda" target="_blank" rel="external">on github</a>. See <code>corpus.py#lda_gibbs()</code> for the gibbs algorithm and the ipynb for application to beer.stackoverflow.com data.</p>
<p>The results of LDA are presented as the most likely words for each topic. It is a matter of debate whether these topics are interpretable or useful, but hey, at least it’s about beer!</p>
<h2 id="The-Uncollapsed-Gibbs-Sampler-Algorithm"><a href="#The-Uncollapsed-Gibbs-Sampler-Algorithm" class="headerlink" title="The Uncollapsed Gibbs Sampler Algorithm"></a>The Uncollapsed Gibbs Sampler Algorithm</h2><h4 id="Initialization"><a href="#Initialization" class="headerlink" title="Initialization"></a>Initialization</h4><ol>
<li>Randomly assign all words to a topic</li>
<li>Initialize theta (D x K, document-specific topic probabilities): each theta_d is a k-dimensional sample from Dir(alpha + number of words in topic k)</li>
<li>Initialize beta (K x V, topic-specific term probabilities): each beta_k is a V-dimensional sample from Dir(eta + number of times term v appeared in topic k)</li>
</ol>
<h4 id="Repeat"><a href="#Repeat" class="headerlink" title="Repeat"></a>Repeat</h4><ol>
<li>for every word wi in N, it’s current allocation is zi<br> 1.1. decrement -1 zi document-topic count and topic-term count<br> 1.2. Use theta and beta to calculate probability over topic for word (slide 14 lecture6)<br> 1.3. draw from multinomial with these probabilites - this is the new allocation zi for word wi<br> 1.4. increment +1 zi document-topic count and topic-term count</li>
<li>update theta and beta</li>
</ol>
<h2 id="Results"><a href="#Results" class="headerlink" title="Results"></a>Results</h2><p>As noted above, these results are not presented for merit but for <strong>fun</strong>. I offer some interpretation for most however I find the first 3 uninterpretable. Note that using the 20 top terms does not change these results much.</p>
<h4 id="Topic-1"><a href="#Topic-1" class="headerlink" title="Topic 1:"></a>Topic 1:</h4><table>
<thead>
<tr>
<th>Term</th>
<th style="text-align:center">Probability</th>
</tr>
</thead>
<tbody>
<tr>
<td>drink</td>
<td style="text-align:center">0.0523</td>
</tr>
<tr>
<td>can</td>
<td style="text-align:center">0.0360</td>
</tr>
<tr>
<td>beer</td>
<td style="text-align:center">0.0359</td>
</tr>
<tr>
<td>realli</td>
<td style="text-align:center">0.0255</td>
</tr>
<tr>
<td>becaus</td>
<td style="text-align:center">0.0232</td>
</tr>
<tr>
<td>ingredi</td>
<td style="text-align:center">0.0191</td>
</tr>
<tr>
<td>probabl</td>
<td style="text-align:center">0.0190</td>
</tr>
<tr>
<td>best</td>
<td style="text-align:center">0.0187</td>
</tr>
<tr>
<td>someth</td>
<td style="text-align:center">0.0186</td>
</tr>
<tr>
<td>want</td>
<td style="text-align:center">0.0179</td>
</tr>
</tbody>
</table>
<h4 id="Topic-2"><a href="#Topic-2" class="headerlink" title="Topic 2:"></a>Topic 2:</h4><table>
<thead>
<tr>
<th>Term</th>
<th style="text-align:center">Probability</th>
</tr>
</thead>
<tbody>
<tr>
<td>brew</td>
<td style="text-align:center">0.0391</td>
</tr>
<tr>
<td>style</td>
<td style="text-align:center">0.0379</td>
</tr>
<tr>
<td>thi</td>
<td style="text-align:center">0.0357</td>
</tr>
<tr>
<td>lager</td>
<td style="text-align:center">0.0275</td>
</tr>
<tr>
<td>ha</td>
<td style="text-align:center">0.0220</td>
</tr>
<tr>
<td>ani</td>
<td style="text-align:center">0.0214</td>
</tr>
<tr>
<td>doe</td>
<td style="text-align:center">0.0212</td>
</tr>
<tr>
<td>gener</td>
<td style="text-align:center">0.0209</td>
</tr>
<tr>
<td>question</td>
<td style="text-align:center">0.0185</td>
</tr>
<tr>
<td>process</td>
<td style="text-align:center">0.0179</td>
</tr>
</tbody>
</table>
<h4 id="Topic-3"><a href="#Topic-3" class="headerlink" title="Topic 3:"></a>Topic 3:</h4><table>
<thead>
<tr>
<th>Term</th>
<th style="text-align:center">Probability</th>
</tr>
</thead>
<tbody>
<tr>
<td>beer</td>
<td style="text-align:center">0.0547</td>
</tr>
<tr>
<td>light</td>
<td style="text-align:center">0.0275</td>
</tr>
<tr>
<td>find</td>
<td style="text-align:center">0.0257</td>
</tr>
<tr>
<td>good</td>
<td style="text-align:center">0.0232</td>
</tr>
<tr>
<td>seem</td>
<td style="text-align:center">0.0189</td>
</tr>
<tr>
<td>state</td>
<td style="text-align:center">0.0177</td>
</tr>
<tr>
<td>don</td>
<td style="text-align:center">0.0170</td>
</tr>
<tr>
<td>food</td>
<td style="text-align:center">0.0163</td>
</tr>
<tr>
<td>http</td>
<td style="text-align:center">0.0163</td>
</tr>
<tr>
<td>mean</td>
<td style="text-align:center">0.0155</td>
</tr>
</tbody>
</table>
<h4 id="Topic-4"><a href="#Topic-4" class="headerlink" title="Topic 4:"></a>Topic 4:</h4><p>Wine vs beer</p>
<table>
<thead>
<tr>
<th>Term</th>
<th style="text-align:center">Probability</th>
</tr>
</thead>
<tbody>
<tr>
<td>beer</td>
<td style="text-align:center">0.0797</td>
</tr>
<tr>
<td>differ</td>
<td style="text-align:center">0.0579</td>
</tr>
<tr>
<td>tast</td>
<td style="text-align:center">0.0492</td>
</tr>
<tr>
<td>bottl</td>
<td style="text-align:center">0.0360</td>
</tr>
<tr>
<td>wine</td>
<td style="text-align:center">0.0299</td>
</tr>
<tr>
<td>time</td>
<td style="text-align:center">0.0224</td>
</tr>
<tr>
<td>type</td>
<td style="text-align:center">0.0164</td>
</tr>
<tr>
<td>might</td>
<td style="text-align:center">0.0158</td>
</tr>
<tr>
<td>guin</td>
<td style="text-align:center">0.0136</td>
</tr>
<tr>
<td>pour</td>
<td style="text-align:center">0.0134</td>
</tr>
</tbody>
</table>
<h4 id="Topic-5"><a href="#Topic-5" class="headerlink" title="Topic 5:"></a>Topic 5:</h4><p>Aging beer</p>
<table>
<thead>
<tr>
<th>Term</th>
<th style="text-align:center">Probability</th>
</tr>
</thead>
<tbody>
<tr>
<td>beer</td>
<td style="text-align:center">0.1280</td>
</tr>
<tr>
<td>bottl</td>
<td style="text-align:center">0.0347</td>
</tr>
<tr>
<td>will</td>
<td style="text-align:center">0.0343</td>
</tr>
<tr>
<td>wa</td>
<td style="text-align:center">0.0326</td>
</tr>
<tr>
<td>year</td>
<td style="text-align:center">0.0234</td>
</tr>
<tr>
<td>age</td>
<td style="text-align:center">0.0202</td>
</tr>
<tr>
<td>typic</td>
<td style="text-align:center">0.0138</td>
</tr>
<tr>
<td>local</td>
<td style="text-align:center">0.0130</td>
</tr>
<tr>
<td>possibl</td>
<td style="text-align:center">0.0126</td>
</tr>
<tr>
<td>small</td>
<td style="text-align:center">0.0123</td>
</tr>
</tbody>
</table>
<h4 id="Topic-6"><a href="#Topic-6" class="headerlink" title="Topic 6:"></a>Topic 6:</h4><p>Storing beer</p>
<table>
<thead>
<tr>
<th>Term</th>
<th style="text-align:center">Probability</th>
</tr>
</thead>
<tbody>
<tr>
<td>beer</td>
<td style="text-align:center">0.0988</td>
</tr>
<tr>
<td>temperatur</td>
<td style="text-align:center">0.0268</td>
</tr>
<tr>
<td>serv</td>
<td style="text-align:center">0.0238</td>
</tr>
<tr>
<td>wa</td>
<td style="text-align:center">0.0229</td>
</tr>
<tr>
<td>ad</td>
<td style="text-align:center">0.0167</td>
</tr>
<tr>
<td>chang</td>
<td style="text-align:center">0.0143</td>
</tr>
<tr>
<td>similar</td>
<td style="text-align:center">0.0139</td>
</tr>
<tr>
<td>onli</td>
<td style="text-align:center">0.0137</td>
</tr>
<tr>
<td>ani</td>
<td style="text-align:center">0.0137</td>
</tr>
<tr>
<td>cold</td>
<td style="text-align:center">0.0128</td>
</tr>
</tbody>
</table>
<h4 id="Topic-7"><a href="#Topic-7" class="headerlink" title="Topic 7:"></a>Topic 7:</h4><p>IPA’s and their taste (ale, hops, ipa, flavor, taste)</p>
<table>
<thead>
<tr>
<th>Term</th>
<th style="text-align:center">Probability</th>
</tr>
</thead>
<tbody>
<tr>
<td>flavor</td>
<td style="text-align:center">0.0448</td>
</tr>
<tr>
<td>ale</td>
<td style="text-align:center">0.0356</td>
</tr>
<tr>
<td>hop</td>
<td style="text-align:center">0.0321</td>
</tr>
<tr>
<td>may</td>
<td style="text-align:center">0.0310</td>
</tr>
<tr>
<td>ipa</td>
<td style="text-align:center">0.0270</td>
</tr>
<tr>
<td>much</td>
<td style="text-align:center">0.0260</td>
</tr>
<tr>
<td>tast</td>
<td style="text-align:center">0.0183</td>
</tr>
<tr>
<td>though</td>
<td style="text-align:center">0.0175</td>
</tr>
<tr>
<td>exampl</td>
<td style="text-align:center">0.0172</td>
</tr>
<tr>
<td>effect</td>
<td style="text-align:center">0.0164</td>
</tr>
</tbody>
</table>
<h4 id="Topic-8"><a href="#Topic-8" class="headerlink" title="Topic 8:"></a>Topic 8:</h4><table>
<thead>
<tr>
<th>Term</th>
<th style="text-align:center">Probability</th>
</tr>
</thead>
<tbody>
<tr>
<td>can</td>
<td style="text-align:center">0.0515</td>
</tr>
<tr>
<td>beer</td>
<td style="text-align:center">0.0507</td>
</tr>
<tr>
<td>use</td>
<td style="text-align:center">0.0352</td>
</tr>
<tr>
<td>malt</td>
<td style="text-align:center">0.0348</td>
</tr>
<tr>
<td>bitter</td>
<td style="text-align:center">0.0279</td>
</tr>
<tr>
<td>veri</td>
<td style="text-align:center">0.0268</td>
</tr>
<tr>
<td>will</td>
<td style="text-align:center">0.0251</td>
</tr>
<tr>
<td>carbon</td>
<td style="text-align:center">0.0247</td>
</tr>
<tr>
<td>brewer</td>
<td style="text-align:center">0.0200</td>
</tr>
<tr>
<td>hop</td>
<td style="text-align:center">0.0194</td>
</tr>
</tbody>
</table>
<h3 id="Topic-9"><a href="#Topic-9" class="headerlink" title="Topic 9:"></a>Topic 9:</h3><p>Producing beer</p>
<table>
<thead>
<tr>
<th>Term</th>
<th style="text-align:center">Probability</th>
</tr>
</thead>
<tbody>
<tr>
<td>beer</td>
<td style="text-align:center">0.0634</td>
</tr>
<tr>
<td>breweri</td>
<td style="text-align:center">0.0446</td>
</tr>
<tr>
<td>thi</td>
<td style="text-align:center">0.0337</td>
</tr>
<tr>
<td>store</td>
<td style="text-align:center">0.0252</td>
</tr>
<tr>
<td>look</td>
<td style="text-align:center">0.0200</td>
</tr>
<tr>
<td>make</td>
<td style="text-align:center">0.0186</td>
</tr>
<tr>
<td>sinc</td>
<td style="text-align:center">0.0182</td>
</tr>
<tr>
<td>whi</td>
<td style="text-align:center">0.0180</td>
</tr>
<tr>
<td>call</td>
<td style="text-align:center">0.0173</td>
</tr>
<tr>
<td>onli</td>
<td style="text-align:center">0.0173</td>
</tr>
</tbody>
</table>
<h4 id="Topic-10"><a href="#Topic-10" class="headerlink" title="Topic 10"></a>Topic 10</h4><p>Fermentation</p>
<table>
<thead>
<tr>
<th>Term</th>
<th style="text-align:center">Probability</th>
</tr>
</thead>
<tbody>
<tr>
<td>alcohol</td>
<td style="text-align:center">0.0615</td>
</tr>
<tr>
<td>glass</td>
<td style="text-align:center">0.0441</td>
</tr>
<tr>
<td>use</td>
<td style="text-align:center">0.0434</td>
</tr>
<tr>
<td>thi</td>
<td style="text-align:center">0.0350</td>
</tr>
<tr>
<td>yeast</td>
<td style="text-align:center">0.0348</td>
</tr>
<tr>
<td>ferment</td>
<td style="text-align:center">0.0342</td>
</tr>
<tr>
<td>abv</td>
<td style="text-align:center">0.0256</td>
</tr>
<tr>
<td>water</td>
<td style="text-align:center">0.0243</td>
</tr>
<tr>
<td>sugar</td>
<td style="text-align:center">0.0217</td>
</tr>
<tr>
<td>produc</td>
<td style="text-align:center">0.0183</td>
</tr>
</tbody>
</table>
</div></article></div></section><footer><div class="paginator"><a href="/2016/05/06/Neuron-Vis-prototype/" class="next">NEXT</a></div><div class="copyright"><p>© 2015 - 2016 <a href="abarciauskas-bgse.github.io">Aimee Barciauskas</a>, unless otherwise noted.</p></div></footer><script>(function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;e=o.createElement(i);r=o.getElementsByTagName(i)[0];e.src='//www.google-analytics.com/analytics.js';r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));ga('create',"UA-65933410-1",'auto');ga('send','pageview');</script><script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "//hm.baidu.com/hm.js?a36e15d9e2adec9a21fcdd9f686b1ed2";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script><script src="https://cdn.bootcss.com/mathjax/2.5.3/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script></body></html>